name: TEST

on: [ push, pull_request ]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v2.3.4

      - name: Install 🔧
        run: yarn install

      - name: Build 🛠
        run: sudo docker-compose --env-file=./.env.development up -d --build

      - name: Wait ⏱️
        run: sleep 15

      - name: Test ⚙
        run: mocha --require ts-node/register --recursive --extension test.ts --timeout 5000
